<!-- preview.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bog Preview</title>
    <style id="previewStyles">
        /* Auk Styles will be injected here */
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- Bog Game will be rendered here -->
    </div>
    <script>
        // Listen for messages from the main window
        window.addEventListener('message', (event) => {
            // Optional: Validate event.origin for security
            // if (event.origin !== 'http://localhost:8000') return;

            const data = event.data;
            if (data.type === 'render') {
                document.getElementById('gameContainer').innerHTML = data.content.html;
                document.getElementById('previewStyles').innerHTML = data.content.css;
            }
        }, false);

        // Acknowledge the main window that the preview is ready
        window.opener.postMessage('acknowledged', '*');

        // Notify the main window when the preview is closed
        window.addEventListener('beforeunload', () => {
            window.opener.postMessage('previewClosed', '*');
        });
    </script>
</body>
</html>
